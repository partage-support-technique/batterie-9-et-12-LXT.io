<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Compatibilité Batterie Makita (9Ah/12Ah)</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 40px;
            text-align: center;
            background-color: #f4f4f4;
            color: #333;
        }
        #container {
            max-width: 800px;
            margin: 0 auto;
            background: #fff;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
            position: relative; /* Pour positionner le bouton sommaire par rapport à ce conteneur */
        }
        h2 {
            color: #333;
            margin-bottom: 30px;
        }
        /* Conteneur de la recherche et des suggestions */
        #search-container {
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 20px 0;
            gap: 10px;
        }
        #search-input {
            padding: 10px;
            font-size: 16px;
            border: 2px solid #ccc;
            border-radius: 4px;
            width: 250px;
            box-sizing: border-box;
        }
        #suggestions-box {
            position: absolute;
            top: 100%;
            left: 50%;
            transform: translateX(-50%);
            width: 250px;
            max-height: 200px;
            overflow-y: auto;
            border: 1px solid #ddd;
            border-top: none;
            background-color: white;
            z-index: 10;
            text-align: left;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        .suggestion-item {
            padding: 10px;
            cursor: pointer;
            border-bottom: 1px solid #eee;
        }
        .suggestion-item:hover {
            background-color: #e6f7ff;
        }
        /* Style des résultats de compatibilité */
        #results-container {
            margin-top: 30px;
            min-height: 80px; 
            text-align: left;
            border: 1px solid #eee;
            padding: 15px;
            border-radius: 4px;
            background-color: #fafafa;
        }
        .result-line {
            font-size: 1.1em;
            margin: 10px 0;
            display: flex;
            justify-content: flex-start;
            gap: 15px;
        }
        .result-label {
            font-weight: bold;
            color: #555;
            width: 250px; 
            text-align: right;
        }
        .status-oui {
            color: green;
            font-weight: bold;
            /* Utiliser flex pour centrer verticalement le texte et l'image */
            display: flex; 
            align-items: center;
        }
        .status-non {
            color: red;
            font-weight: bold;
        }
        footer {
            margin-top: 40px;
            padding-top: 20px;
            border-top: 1px solid #ddd;
            font-size: 0.9em;
            color: #777;
            text-align: justify;
        }
        /* Style pour le bouton Sommaire en bas à gauche */
        #sommaire-button {
            position: fixed; /* Position fixe par rapport à la fenêtre */
            bottom: 20px;
            left: 20px;
            padding: 10px 15px;
            background-color: #004d99; /* Couleur Makita Blue */
            color: white;
            text-decoration: none;
            border-radius: 5px;
            font-weight: bold;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.2);
            transition: background-color 0.3s;
            z-index: 20; /* Assurez-vous qu'il est au-dessus des autres éléments */
        }
        #sommaire-button:hover {
            background-color: #003366;
        }
    </style>
</head>
<body>

    <div id="container">

        <header id="logo">
            <a href="https://www.makita.fr/" target="_blank">
                <img src="https://www.makita.fr/data/pam/public/makita_logo3.png" alt="MAKITA Logo" style="max-width: 200px; height: auto; margin-bottom: 25px;">
            </a>
        </header>

        <h2>Compatibilité batterie 9 et 12Ah (BL1890 et BL18120)</h2>

        <div id="search-container">
            <label for="search-input" style="font-weight: bold;">Modèle de machine concernée par la demande de compatibilité :</label>
            <input type="text" id="search-input" list="machine-list" placeholder="Ex: DLM330" oninput="handleInput()" onfocus="handleInput()">
            <div id="suggestions-box"></div>
        </div>
        
        <div id="results-container" style="display: none;">
            <div class="result-line">
                <span class="result-label">Batterie BL1890 :</span>
                <span id="bl1890-result"></span>
            </div>
            <div class="result-line">
                <span class="result-label">Batterie BL18120 :</span>
                <span id="bl18120-result"></span>
            </div>
        </div>
        <p id="not-found" style="color: orange; display: none; margin-top: 20px;">Modèle non trouvé dans la base de données.</p>


        <footer>
            <p>
                <strong>Avertissement sur le déséquilibre :</strong>
            </p>
            <p>
                L'utilisation de batteries de 9 Ah ou 12 Ah, bien que techniquement compatibles, peut engendrer un déséquilibre partiel ou total de la machine en raison de leur poids et de leur encombrement accrus, ce qui pourrait potentiellement affecter le confort et la précision d'utilisation.
            </p>
        </footer>

    </div>

    <a id="sommaire-button" href="https://partage-support-technique.github.io/sommaire/" target="_blank">Sommaire</a>

    <script>
        // --- CONSTANTES POUR LES IMAGES DE BATTERIE AJOUTÉES ---
        const BL1890_IMG = '<img src="https://fi.makitamedia.com/images/3_Makita/301_machines/3011_a_GS1/30120_JPG_zoom/1915H4-0_C2L0.jpg" alt="BL1890" style="height: 25px; vertical-align: middle; margin-left: 5px;">';
        const BL18120_IMG = '<img src="https://fi.makitamedia.com/images/3_Makita/301_machines/3011_a_GS1/30120_JPG_zoom/1915J2-8_C2L0.jpg" alt="BL18120" style="height: 25px; vertical-align: middle; margin-left: 5px;">';
        
        // --- BASE DE DONNÉES DE COMPATIBILITÉ (Mise à jour sans les modèles en 'Z' et avec DLM480) ---
        const compatibilityData = {
            "DLM330": {"BL1890": "Non", "BL18120": "Non"},
            "DLM382": {"BL1890": "Non", "BL18120": "Non"},
            "DLM432": {"BL1890": "Non", "BL18120": "Non"},
            "DLM462": {"BL1890": "Non", "BL18120": "Non"},
            "DLM481": {"BL1890": "Oui", "BL18120": "Non"},
            "DLM538": {"BL1890": "Oui", "BL18120": "Non"},
            "DLM539": {"BL1890": "Oui", "BL18120": "Non"},
            "DLM532": {"BL1890": "Non", "BL18120": "Non"},
            "DLM480": {"BL1890": "Oui", "BL18120": "Non"}, // MODIFIÉ : Remplace DLL480
            "DUC306": {"BL1890": "Oui", "BL18120": "Oui"},
            "DUC101": {"BL1890": "Oui", "BL18120": "Oui"},
            "DUC122": {"BL1890": "Oui", "BL18120": "Oui"},
            "DUC356": {"BL1890": "Oui", "BL18120": "Oui"},
            "DUC307": {"BL1890": "Oui", "BL18120": "Oui"},
            "DUA301": {"BL1890": "Oui", "BL18120": "Oui"},
            "DUA300": {"BL1890": "Oui", "BL18120": "Oui"},
            "DUX18": {"BL1890": "Non", "BL18120": "Non"},
            "DUX60": {"BL1890": "Non", "BL18120": "Non"},
            "DEADML810": {"BL1890": "Oui", "BL18120": "Oui"},
            "CW002G": {"BL1890": "Non", "BL18120": "Non"},
            "CW004G": {"BL1890": "Oui", "BL18120": "Non"},
            "CW003G": {"BL1890": "Non", "BL18120": "Non"},
            "ML010G": {"BL1890": "Non", "BL18120": "Non"},
            "DEADML809": {"BL1890": "Non", "BL18120": "Non"},
            "DEADML811": {"BL1890": "Non", "BL18120": "Non"},
            "DEBDML816": {"BL1890": "Oui", "BL18120": "Oui"},
            "DEBDML815": {"BL1890": "Oui", "BL18120": "Oui"},
            "DEBDML812": {"BL1890": "Oui", "BL18120": "Oui"},
            "DMR056": {"BL1890": "Oui", "BL18120": "Oui"},
            "DMR055": {"BL1890": "Oui", "BL18120": "Oui"},
            "DEBDML808": {"BL1890": "Oui", "BL18120": "Oui"},
            "DEADML817": {"BL1890": "Oui", "BL18120": "Oui"},
            "BML184": {"BL1890": "Oui", "BL18120": "Oui"},
            "DUR193RF": {"BL1890": "Oui", "BL18120": "Oui"},
            "DUR190L": {"BL1890": "Oui", "BL18120": "Oui"},
            "DUR191": {"BL1890": "Oui", "BL18120": "Oui"},
            "DUR192": {"BL1890": "Oui", "BL18120": "Oui"},
            "DUR194": {"BL1890": "Oui", "BL18120": "Oui"},
            "DUR195": {"BL1890": "Oui", "BL18120": "Oui"},
            "DUR368": {"BL1890": "Non", "BL18120": "Non"},
            "DUR369": {"BL1890": "Non", "BL18120": "Non"},
            "DLM380": {"BL1890": "Non", "BL18120": "Non"},
            "DLM431": {"BL1890": "Non", "BL18120": "Non"},
            "DLM430": {"BL1890": "Non", "BL18120": "Non"},
            "DLM461": {"BL1890": "Non", "BL18120": "Non"},
            "DLM530": {"BL1890": "Non", "BL18120": "Non"},
            "DLM533": {"BL1890": "Oui", "BL18120": "Non"},
            "DLM534": {"BL1890": "Oui", "BL18120": "Non"},
            "DUM111": {"BL1890": "Oui", "BL18120": "Oui"},
            "DUM604": {"BL1890": "Oui", "BL18120": "Oui"},
            "DUM606": {"BL1890": "Oui", "BL18120": "Oui"},
            "DUH523": {"BL1890": "Oui", "BL18120": "Oui"},
            "DUH601": {"BL1890": "Oui", "BL18120": "Oui"},
            "DUH751": {"BL1890": "Oui", "BL18120": "Oui"},
            "DUH502": {"BL1890": "Oui", "BL18120": "Oui"},
            "DUH602": {"BL1890": "Oui", "BL18120": "Oui"},
            "DUH752": {"BL1890": "Oui", "BL18120": "Oui"},
            "DUH604": {"BL1890": "Oui", "BL18120": "Non"},
            "DUH605": {"BL1890": "Oui", "BL18120": "Non"},
            "DUH754": {"BL1890": "Oui", "BL18120": "Non"},
            "DUH755": {"BL1890": "Oui", "BL18120": "Non"},
            "DUB184": {"BL1890": "Oui", "BL18120": "Oui"},
            "DUB186": {"BL1890": "Oui", "BL18120": "Oui"},
            "DUB362": {"BL1890": "Oui", "BL18120": "Oui"},
            "DUB363": {"BL1890": "Oui", "BL18120": "Oui"},
            "DUB361": {"BL1890": "Non", "BL18120": "Non"},
            "DUB360": {"BL1890": "Non", "BL18120": "Non"},
            "BUB182": {"BL1890": "Oui", "BL18120": "Oui"},
            "DUB185": {"BL1890": "Oui", "BL18120": "Oui"},
            "BUB183": {"BL1890": "Non", "BL18120": "Non"},
            "DUB187": {"BL1890": "Oui", "BL18120": "Non"},
            "DUB188": {"BL1890": "Oui", "BL18120": "Non"},
            "DUB365": {"BL1890": "Oui", "BL18120": "Oui"},
            "DUB366": {"BL1890": "Oui", "BL18120": "Oui"},
            "DUB367": {"BL1890": "Oui", "BL18120": "Oui"},
            "DUN600": {"BL1890": "Oui", "BL18120": "Oui"},
            "DUN500": {"BL1890": "Oui", "BL18120": "Oui"},
            "DUN461": {"BL1890": "Oui", "BL18120": "Oui"},
            "DUN460": {"BL1890": "Oui", "BL18120": "Oui"},
            "DUH507": {"BL1890": "Oui", "BL18120": "Oui"},
            "DUH607": {"BL1890": "Oui", "BL18120": "Oui"},
            "DUH757": {"BL1890": "Oui", "BL18120": "Oui"},
            "DUH606": {"BL1890": "Oui", "BL18120": "Oui"},
            "DUH756": {"BL1890": "Oui", "BL18120": "Oui"},
            "DUC254": {"BL1890": "Oui", "BL18120": "Oui"},
            "DUC305": {"BL1890": "Oui", "BL18120": "Oui"},
            "DUC355": {"BL1890": "Oui", "BL18120": "Oui"},
            "DUC303": {"BL1890": "Oui", "BL18120": "Oui"},
            "DUC353": {"BL1890": "Oui", "BL18120": "Oui"},
            "DUC406": {"BL1890": "Oui", "BL18120": "Oui"},
            "DUC357": {"BL1890": "Oui", "BL18120": "Non"},
            "DUC407": {"BL1890": "Oui", "BL18120": "Non"},
            "DUC302": {"BL1890": "Oui", "BL18120": "Oui"},
            "DUC352": {"BL1890": "Oui", "BL18120": "Oui"},
            "DUC400": {"BL1890": "Oui", "BL18120": "Oui"},
            "DUC252": {"BL1890": "Oui", "BL18120": "Oui"},
            "DUC301": {"BL1890": "Oui", "BL18120": "Oui"},
            "DUC351": {"BL1890": "Oui", "BL18120": "Oui"},
            "DUC405": {"BL1890": "Oui", "BL18120": "Oui"},
            "DUB183": {"BL1890": "Non", "BL18120": "Non"},
            "BML186": {"BL1890": "Oui", "BL18120": "Oui"},
            "DML802": {"BL1890": "Oui", "BL18120": "Oui"},
            "DML801": {"BL1890": "Oui", "BL18120": "Oui"},
            "DML805": {"BL1890": "Oui", "BL18120": "Oui"},
            "DML806": {"BL1890": "Oui", "BL18120": "Oui"},
            "DML809": {"BL1890": "Non", "BL18120": "Non"},
            "DML811": {"BL1890": "Non", "BL18120": "Non"},
            "DML812": {"BL1890": "Oui", "BL18120": "Oui"},
            "DML816": {"BL1890": "Oui", "BL18120": "Oui"},
            "DML815": {"BL1890": "Oui", "BL18120": "Oui"},
            "DML808": {"BL1890": "Oui", "BL18120": "Oui"},
            "DML817": {"BL1890": "Oui", "BL18120": "Oui"},
            "DML810": {"BL1890": "Oui", "BL18120": "Oui"},
            "DMR203": {"BL1890": "Oui", "BL18120": "Oui"},
            "DMR205": {"BL1890": "Oui", "BL18120": "Oui"},
            "DMR207": {"BL1890": "Oui", "BL18120": "Oui"},
            "DMR209": {"BL1890": "Oui", "BL18120": "Oui"},
            "DMR210": {"BL1890": "Oui", "BL18120": "Oui"},
            "DMR211": {"BL1890": "Oui", "BL18120": "Oui"},
            "DMR212": {"BL1890": "Oui", "BL18120": "Oui"},
            "DMR300": {"BL1890": "Oui", "BL18120": "Oui"},
            "DMR301": {"BL1890": "Oui", "BL18120": "Oui"},
            "DUR193": {"BL1890": "Oui", "BL18120": "Oui"},
            "DUR190": {"BL1890": "Oui", "BL18120": "Oui"},
            "DUR199": {"BL1890": "Oui", "BL18120": "Oui"},
            "DUC100": {"BL1890": "Oui", "BL18120": "Oui"},
            "DUC300": {"BL1890": "Oui", "BL18120": "Oui"},
            "DUC350": {"BL1890": "Oui", "BL18120": "Oui"}
        };

        // Fonction pour mettre à jour les résultats de compatibilité
        function updateResults(model) {
            const result = compatibilityData[model.toUpperCase()];
            const bl1890Result = document.getElementById('bl1890-result');
            const bl18120Result = document.getElementById('bl18120-result');
            const resultsContainer = document.getElementById('results-container');
            const notFoundMessage = document.getElementById('not-found');

            if (result) {
                // BL1890
                let bl1890Status = result.BL1890;
                let bl1890Html = bl1890Status;
                
                if (bl1890Status === "Oui") {
                    bl1890Html += BL1890_IMG;
                }
                
                bl1890Result.innerHTML = bl1890Html; // Utilisation de innerHTML pour l'image
                bl1890Result.className = bl1890Status === "Oui" ? "status-oui" : "status-non";

                // BL18120
                let bl18120Status = result.BL18120;
                let bl18120Html = bl18120Status;
                
                if (bl18120Status === "Oui") {
                    bl18120Html += BL18120_IMG;
                }

                bl18120Result.innerHTML = bl18120Html; // Utilisation de innerHTML pour l'image
                bl18120Result.className = bl18120Status === "Oui" ? "status-oui" : "status-non";
                
                resultsContainer.style.display = 'block';
                notFoundMessage.style.display = 'none';
            } else {
                resultsContainer.style.display = 'none';
                notFoundMessage.style.display = 'block';
            }
        }

        // Fonction pour mettre à jour les suggestions (affiche toutes les réf. si inputValue est vide)
        function updateSuggestions(inputValue) {
            const suggestionsBox = document.getElementById('suggestions-box');
            suggestionsBox.innerHTML = '';
            
            const models = Object.keys(compatibilityData);
            const filteredModels = models.filter(model => 
                // Filtre les modèles commençant par la saisie de l'utilisateur (fonctionne aussi avec une saisie vide)
                model.toUpperCase().startsWith(inputValue.toUpperCase())
            ).sort();

            // Affiche les 100 premières suggestions pour des raisons de performance et de visibilité
            filteredModels.slice(0, 100).forEach(model => {
                const item = document.createElement('div');
                item.className = 'suggestion-item';
                item.textContent = model;
                item.onclick = function() {
                    document.getElementById('search-input').value = model;
                    suggestionsBox.innerHTML = ''; // Cacher les suggestions
                    suggestionsBox.style.display = 'none';
                    updateResults(model);
                };
                suggestionsBox.appendChild(item);
            });
            
            // Si l'input est vide (au clic), on s'assure que la liste complète s'affiche
            if (inputValue.length === 0 || filteredModels.length > 0) {
                 suggestionsBox.style.display = 'block';
            } else {
                 suggestionsBox.style.display = 'none';
            }
        }

        // Fonction pour gérer l'entrée utilisateur et le focus
        function handleInput() {
            const searchInput = document.getElementById('search-input');
            const inputValue = searchInput.value.trim().toUpperCase();
            const suggestionsBox = document.getElementById('suggestions-box');
            const resultsContainer = document.getElementById('results-container');
            const notFoundMessage = document.getElementById('not-found');

            // 1. Toujours mettre à jour les suggestions (filtrées si saisie, ou toutes au focus/input vide)
            updateSuggestions(searchInput.value.trim());

            let foundExactMatch = false;

            // 2. Vérifier si la saisie exacte correspond à un modèle
            if (compatibilityData[inputValue]) {
                foundExactMatch = true;
            }

            // 3. Gérer l'affichage des résultats ou du message non trouvé
            if (foundExactMatch) {
                updateResults(inputValue);
                suggestionsBox.innerHTML = ''; // Cacher les suggestions si correspondance exacte
                suggestionsBox.style.display = 'none';
            } else if (inputValue.length > 0 && suggestionsBox.children.length === 0) {
                // Si l'utilisateur a tapé quelque chose et qu'il n'y a pas de suggestions (modèle non trouvé)
                resultsContainer.style.display = 'none';
                notFoundMessage.style.display = 'block';
                suggestionsBox.style.display = 'none';
            } else {
                // Sinon, cacher les résultats et le message non trouvé
                resultsContainer.style.display = 'none';
                notFoundMessage.style.display = 'none';
            }
        }
        
        // Cacher les suggestions lorsque l'on clique ailleurs
        document.addEventListener('click', function(e) {
            const suggestionsBox = document.getElementById('suggestions-box');
            if (e.target.id !== 'search-input' && e.target.className !== 'suggestion-item') {
                suggestionsBox.innerHTML = '';
                suggestionsBox.style.display = 'none';
            }
        });

        // Appeler handleInput() une fois au chargement pour simuler la mise à jour si le champ était pré-rempli
        window.onload = () => handleInput();
    </script>

</body>
</html>
